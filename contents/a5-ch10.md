---

## Section 5: Handling Form Submissions

Forms allow users to send information to your server — and FastAPI makes
handling that process straightforward. Whether it’s a name, an email, or a
feedback message, your FastAPI server can receive and process form data using
just a few lines of code.

In this section, you’ll learn to:

* Build a simple HTML form
* Submit the form with a POST request
* Read the submitted values using FastAPI

### 1. Create an HTML Form

Let’s create a basic feedback form in your `templates` folder. Create a file
called `feedback.html`:

```html
<!DOCTYPE html>
<html>
  <head>
    <title>Feedback</title>
  </head>
  <body>
    <h1>Feedback Form</h1>
    <form action="/submit" method="post">
      <label>Your Name:</label>
      <input type="text" name="name"><br><br>

      <label>Your Message:</label><br>
      <textarea name="message"></textarea><br><br>

      <button type="submit">Send</button>
    </form>
  </body>
</html>
```

This form sends its data to `/submit` using the `POST` method when the user
clicks *Send*.

### 2. Show the Form Page from FastAPI

Add this to your `main.py`:

```python
from fastapi import Request
from fastapi.responses import HTMLResponse

@app.get("/feedback", response_class=HTMLResponse)
def feedback_form(request: Request):
    return templates.TemplateResponse("feedback.html", {"request": request})
```

Now when you visit `/feedback`, you’ll see your form.

### 3. Accepting Form Input with `@app.post`

To handle submitted form data, define a `POST` route using FastAPI’s `Form()`
helper.

```python
from fastapi import Form

@app.post("/submit")
def handle_feedback(name: str = Form(...), message: str = Form(...)):
    return {
        "received_name": name,
        "received_message": message
    }
```

This takes the two input fields (`name`, `message`) and returns them in a
JSON-style confirmation.

### 4. Try It Out

Start your FastAPI server and visit:

```
http://localhost:8000/feedback
```

Submit a name and a message. After clicking **Send**, you should see something
like:

```json
{
  "received_name": "Rutherford",
  "received_message": "I am a better person for being in this class."
}
```

Congratulations — your server is now accepting and responding to real user
input.

### 5. What Happens Under the Hood

* The HTML form sends a `POST` request to `/submit`.
* FastAPI parses the request body and extracts the form fields using `Form(...)`.
* The server responds with the submitted data.

> **Helpful Hint:**
> Every form input element must have a `name` attribute — this tells FastAPI
> which variable to extract. If a field is missing, FastAPI will return a 422
> error explaining what went wrong.

