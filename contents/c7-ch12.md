---

## Section 7: Relationships Between Models

Many real-world data sets involve relationships between different types of
objects. In a database, this is handled with **foreign keys** that link one
table to another. In Peewee, relationships are created using the
`ForeignKeyField`.

This section shows you how to model one-to-many and many-to-one relationships
using foreign keys, and how to query related data.

A **one-to-many** relationship implies one record within one table related to
many records in another table. A **many-to-one** relationship implies many
records in one table to one record in another.  These types of relationships
allow us to model connections as we would find them in the real world.

### Example: Airplanes and Pilots

Let’s say each airplane is assigned to a pilot. One pilot may fly many
airplanes, but each airplane only has one pilot. This is a **many-to-one**
relationship (many airplanes → one pilot).

```python
from peewee import *

class Pilot(BaseModel):
    name = CharField()

class Airplane(BaseModel):
    name = CharField()
    range_km = IntegerField()
    pilot = ForeignKeyField(Pilot, backref='airplanes')
```

* `ForeignKeyField(Pilot, backref='airplanes')` means that each airplane is
  linked to one pilot.
* The `backref` lets you query a pilot’s airplanes using `pilot.airplanes`.

### Creating Related Records

You can create a pilot and then assign them to an airplane like this:

```python
alice = Pilot.create(name="Alice")
Airplane.create(name="F-16", range_km=4220, pilot=alice)
```

Now the airplane row in the database has a `pilot_id` column referring to
Alice.

### Querying Related Data

You can query across relationships to get information from both models:

```python
# All airplanes flown by Alice
for plane in alice.airplanes:
    print(plane.name)

# Get the pilot of a particular plane
plane = Airplane.get(Airplane.name == "F-16")
print(plane.pilot.name)
```

You can also use `.join()` to query both tables in one statement:

```python
query = Airplane.select().join(Pilot).where(Pilot.name == "Alice")
```

### Foreign Keys and `null=True`

If a relationship is optional (e.g., a plane might not have a pilot yet), use
`null=True`:

```python
pilot = ForeignKeyField(Pilot, backref='airplanes', null=True)
```

This allows you to leave the field empty when creating a new airplane.

> **Helpful Hint:**
> Relationships let you model more complex systems — like pilots with licenses,
> airports with runways, or flights assigned to routes — and keep your data
> normalized and flexible.

In the next section, you'll learn how to update and delete records — essential
tools for managing changes in your data over time.

