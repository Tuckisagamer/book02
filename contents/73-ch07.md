---

## Section 3: Safely Handling File Errors

In real-world programs, things go wrong. Files might not exist. They might
be locked by another program. You might forget to close a file, or write the
wrong type of data. Good programs don’t crash when this happens — they *handle
errors gracefully*.

Python gives you tools to protect your program when dealing with files.

---

### The Problem: Crashing on Missing Files

This code looks fine… but it can crash:

```python
with open("grades.txt", "r") as f:
    data = f.read()
```

If `grades.txt` doesn’t exist, Python stops everything and throws this error:

```
FileNotFoundError: [Errno 2] No such file or directory: 'grades.txt'
```

This is where `try` / `except` comes in.

---

### Using `try` / `except` to Catch Errors

You can catch the error and respond with a helpful message:

```python
try:
    with open("grades.txt", "r") as f:
        data = f.read()
except FileNotFoundError:
    print("The file doesn't exist. No grades to show.")
```

Now your program doesn’t crash — it just informs the user and moves on.

---

### Catching Other Errors

There are many file-related errors. Some common ones include:

* `FileNotFoundError` - file doesn’t exist
* `PermissionError` - can’t open the file due to security settings
* `IsADirectoryError` - tried to open a folder as if it were a file

You can catch all file-related issues with a general `Exception`, but that’s
usually discouraged unless you're logging or debugging.

Example:

```python
try:
    with open("notes.txt", "r") as f:
        print(f.read())
except Exception as e:
    print("Something went wrong:", e)
```

This works, but it’s **better to be specific** if you know the exact error to
expect.

---

### Creating a File If It Doesn’t Exist

If your file might not exist yet, you can **check first** or create it in write
mode:

```python
try:
    with open("todo.txt", "r") as file:
        print(file.read())
except FileNotFoundError:
    print("No todo list found. Creating one now.")
    with open("todo.txt", "w") as file:
        file.write("Start your list here.\n")
```

This handles the error *and fixes the problem*, by creating the file when
needed.

---

### Best Practices for Safe File Access

- Use `with open(...) as file:` to auto-close the file
- Use `try` / `except` when reading a file that might not exist
- Be specific about the error you expect (like `FileNotFoundError`)
- Always test your program with both real and missing files

---

### Practice Challenge

Write a program that tries to open a file called `journal.txt`. If it doesn’t
exist:

1. Print a message to the user.
2. Create the file and write a single line like `"First journal entry."`
3. Then try to open it again and read the contents.

> **Helpful Hint:**
> You may need two separate `with open()` blocks — one for writing, one for
> reading.

