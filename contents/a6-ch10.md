---

## Section 6: Rendering Responses Based on User Input

Once you've accepted input from a user (via a form or a route parameter), the
next step is often to *respond with a customized HTML page*. FastAPI makes
this possible using Jinja2 templates and dynamic content rendering.

In this section, you’ll learn how to:

* Inject user-submitted data into an HTML template
* Use Jinja2 placeholders for dynamic rendering
* Return a response page that reflects what the user submitted

### 1. Update the Template to Accept Dynamic Values

Let’s make a new template that displays feedback back to the user.

Create a new file: `templates/thanks.html`

```html
<!DOCTYPE html>
<html>
  <head><title>Thanks!</title></head>
  <body>
    <h1>Thank You, {{ name }}!</h1>
    <p>We received your message:</p>
    <blockquote>{{ message }}</blockquote>
    <p>We appreciate your feedback.</p>
  </body>
</html>
```

This template uses **Jinja2 syntax**:

* `{{ name }}` is replaced with the name the user submitted
* `{{ message }}` is replaced with the feedback content

### 2. Update Your POST Route to Render a Page

Now modify your `@app.post("/submit")` route in `main.py` like this:

```python
from fastapi import Form, Request
from fastapi.responses import HTMLResponse

@app.post("/submit", response_class=HTMLResponse)
def handle_feedback(request: Request, name: str = Form(...), message: str = Form(...)):
    return templates.TemplateResponse("thanks.html", {
        "request": request,
        "name": name,
        "message": message
    })
```

Instead of returning raw JSON, this sends the user to a "Thank You" page that
reflects their input.

### 3. Try It Out

1. Visit `/feedback`
2. Fill out the form and click Send
3. You’ll be taken to a `/submit` page that shows:

   * A personalized heading with your name
   * Your original message, displayed in a blockquote

### 4. Why Use This Approach?

This is a foundational concept in full-stack web development:

* **Users interact with HTML forms**
* **The server processes the input**
* **The server returns a new HTML page that reflects the result**

This is how login forms, contact pages, and most basic user workflows are built.

> **Helpful Hint:**
> You can reuse this pattern for many purposes: comments, signups, surveys, and
> more. The key is combining HTML forms with template responses.

